<!DOCTYPE html>
<html lang="ja">
<head>
  <link rel="stylesheet" href="style.css">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>箱鯖攻城戦</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
  </style>
</head>
<body class="text-white min-h-screen flex flex-col items-center px-6 py-10 bg-gradient-to-b from-gray-800 via-gray-900 to-black">
  <!-- タイトル -->
  <h1 class="text-4xl font-bold mb-10 drop-shadow-lg text-center">🏯 箱鯖攻城戦</h1>

  <!-- メニューボタン -->
  <div class="space-y-4 mb-10">
    <button id="toggleStatsBtn" class="w-60 h-16 text-lg font-medium rounded-xl glass hover:bg-purple-500 hover:bg-opacity-30 transition-all shadow-lg">
      📊 試合統計
    </button>
    <button class="w-60 h-16 text-lg font-medium rounded-xl glass hover:bg-teal-500 hover:bg-opacity-30 transition-all shadow-lg">
      📘 クラス説明
    </button>
  </div>

  <!-- 統計セクション -->
  <div id="statsSection" class="toggle-content w-full max-w-4xl">
    <div id="statsContainer" class="space-y-6 w-full">
      <!-- 統計カードが動的にここへ追加されます -->
    </div>
  </div>

  <script>
    // WebSocket接続
    const ws = new WebSocket("ws://" + location.host);

    ws.onopen = function() {
      console.log("WebSocket接続が確立されました。");
    };

    ws.onmessage = function(event) {
      const statsData = JSON.parse(event.data);  // サーバーから受け取ったデータ（JSON形式）をパース

      // 受け取った試合統計を画面に表示
      const statsContainer = document.getElementById("statsContainer");
      statsContainer.innerHTML = "";  // 以前のデータをクリア

      statsData.forEach(stat => {
        // 各統計データをカード形式で追加
        const statCard = document.createElement("div");
        statCard.classList.add("p-6", "bg-gray-700", "rounded-xl", "shadow-lg");
        statCard.innerHTML = `
          <h3 class="text-xl font-semibold">${stat.title}</h3>
          <p>${stat.value}</p>
        `;
        statsContainer.appendChild(statCard);
      });
    };

    ws.onclose = function() {
      console.log("WebSocket接続が切断されました。");
    };

    // 試合統計表示ボタンのクリックイベント
    document.getElementById("toggleStatsBtn").addEventListener("click", function() {
      const statsSection = document.getElementById("statsSection");
      statsSection.classList.toggle("hidden");  // 統計セクションの表示・非表示を切り替え
    });
  </script>

  <script src="scripts.js" defer></script>
</body>
</html>
